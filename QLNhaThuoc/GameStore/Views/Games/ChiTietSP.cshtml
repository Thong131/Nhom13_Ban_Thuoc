@model GameStore.Models.SanPham

@{
    ViewBag.Title = "Chi Tiết Sản Phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

<!-- Hiển thị thông tin sản phẩm -->
<div class="container single-product">
    <div class="row">
        <div class="col-5">
            <img src="~/UploadFile/@Model.hinhAnh1" alt="@Model.tenSP" class="img-fluid" />
            <!-- Thêm hình ảnh khác nếu cần -->
        </div>
        <div class="col-7">
            <h3>@Model.tenSP</h3>
            <h4>@Model.giaTien.000 VNĐ</h4>
            <p>@Model.chitietSP</p>
            <a href="@Url.Action("AddToCart", "GioHang", new { maSP = @Model.maSP })" class="btn btn-success">Thêm vào giỏ hàng</a>
        </div>
    </div>

    <hr />

    @{
        var binhLuans = ViewBag.BinhLuans as List<GameStore.Models.BinhLuan>; // Chuyển đổi kiểu
    }

    <div class="MoTaDanhGia">
        <h3>Bình luận</h3>
        @if (binhLuans != null && binhLuans.Count > 0) // Sử dụng Count để kiểm tra số lượng
        {
            foreach (var binhLuan in binhLuans)
            {
                <div>
                    <strong>@binhLuan.NguoiDung.hoTen</strong>
                    <p>@binhLuan.NoiDung</p>
                    <small>@binhLuan.NgayBinhLuan.ToString("dd/MM/yyyy HH:mm:ss")</small>
                </div>
            }
        }
        else
        {
            <p>Chưa có bình luận nào.</p>
        }

        <h4>Gửi Bình Luận</h4>
        @using (Html.BeginForm("AddComment", "Games", FormMethod.Post))
        {
            @Html.Hidden("maSP", Model.maSP) <!-- Thêm ID sản phẩm vào form -->
            <div class="form-group">
                <label for="NoiDung">Nội dung</label>
                <textarea name="NoiDung" class="form-control" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Gửi bình luận</button>
        }
    </div>
